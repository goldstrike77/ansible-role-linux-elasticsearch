---
elastic_plugin_url: 'http://artifacts.elastic.co/downloads/packs'

elastic_xpack_builtin_user:
  - 'elastic'
  - 'kibana'
  - 'logstash_system'

elastic_folder:
  - '{{ elastic_path }}/elasticsearch'

elastic_conf_scripts:
  - { src: 'elasticsearch.service.j2',   dest: '/lib/systemd/system/elasticsearch.service' }
  - { src: 'elasticsearch.yml.j2',       dest: '/etc/elasticsearch/elasticsearch.yml' }
  - { src: 'elasticsearch.sysconfig.j2', dest: '/etc/sysconfig/elasticsearch' }
  - { src: 'jvm.options.j2',             dest: '/etc/elasticsearch/jvm.options' }

elastic_kernel_parameters:
  - { variable: 'vm.max_map_count', value: '262144' }
  - { variable: 'vm.swappiness', value: '10' }

elastic_servers: "\
  {% set _elastic_servers = [] %}\
  {% for host in groups[group_names[-1]] %}\
    {% set _elastic_cluster = hostvars[host]['elastic_cluster'] | default('', true) %}\
    {% if ( _elastic_cluster == hostvars[host]['elastic_cluster']) %}\
      {% if _elastic_servers.append(hostvars[host]['ansible_host']) %}{% endif %}\
    {% endif %}\
  {% endfor %}\
  {{ _elastic_servers }}"

elastic_exporter_collector:
#  - 'es.all'
  - 'es.indices'
